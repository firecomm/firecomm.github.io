<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1"/><script src="https://use.fontawesome.com/582265226c.js"></script><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&amp;display=swap" rel="stylesheet"/><style data-styled="crZVHK cIFmEy gStFwB ekbUvn gkjdIh bkJYag hQBqQK ingTeD kzHoIP gkGBYf cBCYpS wurBC bJQHUk kVCNU kVBzNx QhKwy gvDWNs" data-styled-version="4.3.2">
/* sc-component-id: sc-global-29550948 */
table{border:3px solid #000000;width:100%;text-align:left;border-collapse:collapse;} table td,table th{border:1px solid #000000;padding:5px 4px;} table tbody td{font-size:13px;} table thead{background:#CFCFCF;background:-moz-linear-gradient(top,#dbdbdb 0%,#d3d3d3 66%,#CFCFCF 100%);background:-webkit-linear-gradient(top,#dbdbdb 0%,#d3d3d3 66%,#CFCFCF 100%);background:linear-gradient(to bottom,#dbdbdb 0%,#d3d3d3 66%,#CFCFCF 100%);border-bottom:3px solid #000000;} table thead th{font-size:15px;font-weight:bold;color:#000000;text-align:left;} table tfoot{font-size:14px;font-weight:bold;color:#000000;border-top:3px solid #000000;} table tfoot td{font-size:14px;}
/* sc-component-id: sc-global-3895128562 */
{/*!
* Agate by Taufik Nurrohman <https://github.com/tovic>
* ----------------------------------------------------
*
* #ade5fc
* #a2fca2
* #c6b4f0
* #d36363
* #fcc28c
* #fc9b9b
* #ffa
* #fff
* #333
* #62c8f3
* #888
*
*/} .hljs{display:block;overflow-x:auto;padding:0.5em;background:#333;color:white;} .hljs-name,.hljs-strong{font-weight:bold;} .hljs-code,.hljs-emphasis{font-style:italic;} .hljs-tag{color:#62c8f3;} .hljs-variable,.hljs-template-variable,.hljs-selector-id,.hljs-selector-class{color:#ade5fc;} .hljs-string,.hljs-bullet{color:#a2fca2;} .hljs-type,.hljs-title,.hljs-section,.hljs-attribute,.hljs-quote,.hljs-built_in,.hljs-builtin-name{color:#ffa;} .hljs-number,.hljs-symbol,.hljs-bullet{color:#d36363;} .hljs-keyword,.hljs-selector-tag,.hljs-literal{color:#fcc28c;} .hljs-comment,.hljs-deletion,.hljs-code{color:#888;} .hljs-regexp,.hljs-link{color:#c6b4f0;} .hljs-meta{color:#fc9b9b;} .hljs-deletion{background-color:#fc9b9b;color:#333;} .hljs-addition{background-color:#a2fca2;color:#333;} .hljs a{color:inherit;} .hljs a:focus,.hljs a:hover{color:inherit;-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: sc-global-819470482 */
body{width:100%;margin:0;height:100%;font-family:'Roboto',sans-serif;background-color:#fcfdff;} a{color:#fcfdff;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: NavCore__NavCoreFlex-sc-1jjng7x-0 */
.ekbUvn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;} .ekbUvn a{background-color:#8E0E34;text-align:center;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;font-size:15px;} .ekbUvn .big-a{-webkit-box-flex:2;-webkit-flex-grow:2;-ms-flex-positive:2;flex-grow:2;} .ekbUvn a:hover{background-color:#e01634;} @media only screen and (min-width:640px){.ekbUvn{width:330px;margin-right:20px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background-color:#e01634;}.ekbUvn a{background-color:transparent;font-size:17.5px;}.ekbUvn a:hover{background-color:transparent;}}
/* sc-component-id: styles__VerticalCenter-sc-15s5x5k-0 */
.gStFwB{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: styles__FlexRow-sc-15s5x5k-2 */
.ingTeD{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}
/* sc-component-id: styles__Flex-sc-15s5x5k-4 */
.cIFmEy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}
/* sc-component-id: Nav__NavStyle-sc-8cs43r-0 */
.crZVHK{height:50px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;font-size:17.5px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background-color:#e01634;} .crZVHK img{margin-top:4px;} .crZVHK .logo{margin-top:2px;font-size:30px;font-weight:700;width:225px;color:#fcfdff;} .crZVHK .logo a{margin-left:20px;font-size:25px;} .crZVHK .logo a:hover{-webkit-text-decoration:none;text-decoration:none;} .crZVHK .justify-left{-webkit-box-pack:left !important;-webkit-justify-content:left !important;-ms-flex-pack:left !important;justify-content:left !important;} .crZVHK a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .crZVHK a:hover{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;} .crZVHK i{color:#fcfdff;font-size:40px;}
/* sc-component-id: HamburgerBar__SectionTitle-ct7u3y-0 */
.hQBqQK{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-left:20px;font-size:20px;font-weight:400;}
/* sc-component-id: HamburgerBar__Hamburger-ct7u3y-1 */
.bkJYag{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-left:10px;margin-top:5px;height:100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .bkJYag #nav-icon3{width:30px;height:30px;position:relative;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-transition:0.5s ease-in-out;-moz-transition:0.5s ease-in-out;-o-transition:0.5s ease-in-out;-webkit-transition:0.5s ease-in-out;transition:0.5s ease-in-out;cursor:pointer;} .bkJYag span{display:block;position:absolute;height:4px;width:100%;background:#2b282b;opacity:1;left:0;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-transition:0.25s ease-in-out;-moz-transition:0.25s ease-in-out;-o-transition:0.25s ease-in-out;-webkit-transition:0.25s ease-in-out;transition:0.25s ease-in-out;} .bkJYag #nav-icon3 span:nth-child(1){top:0px;} .bkJYag #nav-icon3 span:nth-child(2),.bkJYag #nav-icon3 span:nth-child(3){top:9px;} .bkJYag #nav-icon3 span:nth-child(4){top:18px;} .bkJYag #nav-icon3.open span:nth-child(1){top:9px;width:0%;left:50%;} .bkJYag #nav-icon3.open span:nth-child(2){-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-o-transform:rotate(45deg);-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);} .bkJYag #nav-icon3.open span:nth-child(3){-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-o-transform:rotate(-45deg);-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);} .bkJYag #nav-icon3.open span:nth-child(4){top:9px;width:0%;left:50%;}
/* sc-component-id: HamburgerBar__HamburgerBarStyle-ct7u3y-2 */
.gkjdIh{width:100%;height:50px;background-color:#edf0f2;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;} .gkjdIh i{font-size:20px;margin-left:5px;} @media only screen and (min-width:640px){.gkjdIh{display:none;}}
/* sc-component-id: Section__SubsectionStyled-aao14i-0 */
.cBCYpS{font-weight:100;font-size:18px;margin-top:3px;margin-bottom:3px;margin-left:20px;color:#2b282b;} .cBCYpS:hover{color:#e01634;}.wurBC{font-weight:100;font-size:18px;margin-top:3px;margin-bottom:3px;margin-left:20px;color:#e01634;} .wurBC:hover{color:#e01634;}
/* sc-component-id: Section__SectionStyled-aao14i-1 */
.gkGBYf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding-left:10px;padding-right:10px;} .gkGBYf h1{font-size:25px;} .gkGBYf i{font-size:23px;-webkit-transition:200ms linear;transition:200ms linear;} .gkGBYf .rotate0{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);} .gkGBYf .rotate90{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}
/* sc-component-id: Sidebar__SidebarStyled-k4u00n-0 */
.kzHoIP{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;margin-bottom:10px;width:100%;font-size:7.5px;font-weight:400;color:#2b282b;background-color:#fcfdff;} .kzHoIP:hover{cursor:pointer;} @media only screen and (min-width:640px){.kzHoIP{width:25%;max-width:250px;}}
/* sc-component-id: Footer__FooterSection-sc-1aztnwy-0 */
.QhKwy{width:100%;padding:0 10px 0 10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;} .QhKwy h5{font-size:15px;margin:10px 0 10px 0;} .QhKwy a{font-weight:400;} @media only screen and (min-width:640px){.QhKwy{width:150px;}}
/* sc-component-id: Footer__Bumper-sc-1aztnwy-1 */
.gvDWNs{width:100%;font-size:15px;text-align:center;font-weight:100;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:0 25% 0 25%;}
/* sc-component-id: Footer__FooterStyles-sc-1aztnwy-2 */
.kVBzNx{padding:15px 0 0 0;width:100%;min-height:250px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;background-color:#2b282b;color:#fcfdff;}
/* sc-component-id: ButtonBar__ButtonBarStyles-sc-2ianj5-0 */
.kVCNU{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:20px;margin-bottom:20px;} .kVCNU button{width:130px;padding:10px;color:#e01634;background-color:#fcfdff;border:#e01634 2px solid;border-radius:4px;} .kVCNU button i{font-size:15px;font-weight:100;} .kVCNU button .fa-arrow-left{margin-right:5px;} .kVCNU button .fa-arrow-right{margin-left:5px;} .kVCNU button:hover{cursor:pointer;color:#fcfdff;background-color:#e01634;border:#fcfdff 2px solid;}
/* sc-component-id: DocsContent__MarkdownStyles-sc-11gwkmp-0 */
.bJQHUk{padding-left:20px;padding-right:20px;width:85%;font-size:18px;margin-top:20px;line-height:27px;} .bJQHUk a{color:#e01634;} @media only screen and (min-width:640px){.bJQHUk{width:65%;padding-left:5%;}}</style><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/><meta charSet="utf-8"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/D1n98egrL5Qu9LX4VeNKo/pages/docs/gettingstarted/intro.js" as="script"/><link rel="preload" href="/_next/static/D1n98egrL5Qu9LX4VeNKo/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-f5e50b6b501ccea2a79b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.39e182df59db346140cc.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-15debc5db3b5bb3d1ded.js" as="script"/></head><body><div id="__next"><section class="Nav__NavStyle-sc-8cs43r-0 crZVHK"><div class="logo"><div class="styles__Flex-sc-15s5x5k-4 cIFmEy"><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><a href="/"><img src="/static/assets/logo_inverted.png" width="35px" height="40px"/></a></div><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><a href="/">Firecomm</a></div></div></div><div class="NavCore__NavCoreFlex-sc-1jjng7x-0 ekbUvn"><a href="/docs/gettingstarted/intro">Getting Started</a><a href="/docs/apireference/buildfunction">API</a><a href="https://github.com/oslabs-beta/firecomm"><i class="fa fa-github"></i></a></div></section><div class="HamburgerBar__HamburgerBarStyle-ct7u3y-2 gkjdIh"><div class="HamburgerBar__Hamburger-ct7u3y-1 bkJYag"><div id="nav-icon3" class=""><span></span><span></span><span></span><span></span></div></div><div class="styles__Flex-sc-15s5x5k-4 cIFmEy"><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><i class="fa fa-angle-right"></i></div><div class="HamburgerBar__SectionTitle-ct7u3y-0 hQBqQK">Intro</div></div></div><div class="styles__FlexRow-sc-15s5x5k-2 ingTeD"><div class="Sidebar__SidebarStyled-k4u00n-0 kzHoIP"><div class="Section__SectionStyled-aao14i-1 gkGBYf"><h1>Getting Started</h1><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><i class="fa fa-angle-right rotate90"></i></div></div><a href="/docs/gettingstarted/concepts"><h1 class="Section__SubsectionStyled-aao14i-0 cBCYpS">Concepts</h1></a><a href="/docs/gettingstarted/intro"><h1 class="Section__SubsectionStyled-aao14i-0 wurBC">Intro</h1></a><div class="Section__SectionStyled-aao14i-1 gkGBYf"><h1>Core</h1><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><i class="fa fa-angle-right rotate90"></i></div></div><a href="/docs/core/overview"><h1 class="Section__SubsectionStyled-aao14i-0 cBCYpS">Overview</h1></a><a href="/docs/core/build"><h1 class="Section__SubsectionStyled-aao14i-0 cBCYpS">Build</h1></a><a href="/docs/core/server"><h1 class="Section__SubsectionStyled-aao14i-0 cBCYpS">Server</h1></a><a href="/docs/core/stub"><h1 class="Section__SubsectionStyled-aao14i-0 cBCYpS">Stub</h1></a><a href="/docs/core/calls"><h1 class="Section__SubsectionStyled-aao14i-0 cBCYpS">Calls</h1></a><a href="/docs/core/servercalls"><h1 class="Section__SubsectionStyled-aao14i-0 cBCYpS">Server Calls</h1></a><a href="/docs/core/stubcalls"><h1 class="Section__SubsectionStyled-aao14i-0 cBCYpS">Stub Calls</h1></a><div class="Section__SectionStyled-aao14i-1 gkGBYf"><h1>Extensions</h1><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><i class="fa fa-angle-right rotate90"></i></div></div><a href="/docs/extensions/middleware"><h1 class="Section__SubsectionStyled-aao14i-0 cBCYpS">Middleware</h1></a><a href="/docs/extensions/metadata"><h1 class="Section__SubsectionStyled-aao14i-0 cBCYpS">Metadata</h1></a><a href="/docs/extensions/interceptors"><h1 class="Section__SubsectionStyled-aao14i-0 cBCYpS">Interceptors</h1></a><div class="Section__SectionStyled-aao14i-1 gkGBYf"><h1>API Reference</h1><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><i class="fa fa-angle-right rotate0"></i></div></div></div><div class="DocsContent__MarkdownStyles-sc-11gwkmp-0 bJQHUk"><h1>Getting Started</h1><h2>Install</h2><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code>npm <span style="color:#954121">i</span> --save firecomm</code></pre><h2>1. Define a .proto file</h2><p>The .proto file is the schema for your Servers and client Stubs. It defines the package you will build which will give your Server and Client superpowers -- Remote Procedure Call (RPC) methods. RPC methods define what Message Object the client Stubs send and what the server Handlers respond with.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// proto/exampleAPI.proto</span>
syntax = <span style="color:#219161">&quot;proto3&quot;</span>;

<span style="color:#954121">package</span> exampleAPI;

<span class="hljs-class"><span style="color:#954121">service</span> <span style="color:#458;font-weight:bold">ChattyMath</span> </span>{
  <span class="hljs-function"><span style="color:#954121">rpc</span> BidiMath (stream Benchmark) <span style="color:#954121">returns</span> (stream Benchmark) {}</span>;
}

<span class="hljs-class"><span style="color:#954121">message</span> <span style="color:#458;font-weight:bold">Benchmark</span> </span>{
  <span style="color:#0086b3">double</span> requests = <span style="color:#40a070">1</span>;
  <span style="color:#0086b3">double</span> responses = <span style="color:#40a070">2</span>;
}</code></pre><blockquote><p>In our example, the RPC method BidiMath will send a stream of Benchmark messages from the client Stub and will <em>return</em> a stream of Benchmark messages from the server Handler for BidiMath. The Benchmark message received on either side will be an Object with the properties <code>requests</code> and <code>responses</code>. The values of <code>requests</code> and <code>responses</code> will be doubles, or potentially very large numbers. This example will use &quot;proto3&quot; syntax -- you can read more about protobufs and all of the possible Message fields at Google&#x27;s developer docs <a href="https://developers.google.com/protocol-buffers/docs/proto3">here</a>.</p></blockquote><h2>2. Build a package</h2><p>In order to pass superpowers to our Server and client Stubs, we first need to package our .proto file. We will use the core <code>build</code> function imported from the firecomm library to build our package.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// package.js</span>
<span style="color:#954121">const</span> { build } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> path = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;path&#x27;</span> );
<span style="color:#954121">const</span> PROTO_PATH = path.join( __dirname, <span style="color:#219161">&#x27;./proto/exampleAPI.proto&#x27;</span> );

<span style="color:#954121">const</span> CONFIG_OBJECT = {
  <span class="hljs-attr">keepCase</span>: <span style="color:#954121">true</span>, <span style="color:#408080;font-style:italic">// keeps our RPC methods camelCased</span>
  longs: <span style="color:#0086b3">Number</span>, <span style="color:#408080;font-style:italic">// compiles the potentially enormous `double`s for our Benchmark requests and responses into a Number rather than a String</span>
}
<span style="color:#954121">const</span> package = build( PROTO_PATH, CONFIG_OBJECT );
<span style="color:#0086b3">module</span>.exports = package;</code></pre><blockquote><p>Under the hood, the config object is passed all the way to the protobufjs loader. For a clearer low-level understanding of the possible configurations, see their npm package documentation <a href="https://www.npmjs.com/package/protobufjs">here</a>.</p></blockquote><h2>3. Create a server</h2><p>Now that we have our package, we need a Server. Let&#x27;s import the <code>Server</code> class from the Firecomm library.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /server/server.js</span>
<span style="color:#954121">const</span> { Server } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> server = <span style="color:#954121">new</span> Server();</code></pre><blockquote><p>Under the hood, Firecomm extends Google&#x27;s gRPC core channel configurations. You can pass an Object to the Server as the first argument to configure advanced options. You can see all of the Object properties and the values you can set them to in the gRPC core docs <a href="https://grpc.github.io/grpc/core/group__grpc__arg__keys.html">here</a>.</p></blockquote><h2>4. Define the server-side Handler</h2><p>Before we can interact with a client, our Server needs Handlers. Handlers are usually unique to each RPC Method. In order to demonstrate the power of gRPCs, we will be listening for client requests and immediately sending back server responses in a ping-pong pattern. Metadata is sent only once at the start of the exchange, which will trigger Node&#x27;s built in timers to start clocking the nanoseconds between responses and requests.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /server/chattyMathHandlers.js</span>
<span class="hljs-function"><span style="color:#954121">function</span> <span style="color:#458;font-weight:bold">BidiMathHandler</span>(<span style="color:#00f">bidi</span>) </span>{
  <span style="color:#954121">let</span> start;
  <span style="color:#954121">let</span> end;
  bidi
    .on(<span style="color:#219161">&#x27;metadata&#x27;</span>, (metadata) =&gt; {
      start = <span style="color:#0086b3">Number</span>(process.hrtime.bigint());
      bidi.set({<span class="hljs-attr">thisSetsMetadata</span>: <span style="color:#219161">&#x27;responses incoming&#x27;</span>})
      <span style="color:#0086b3">console</span>.log(metadata.getMap());
    })
    .on(<span style="color:#219161">&#x27;error&#x27;</span>, (err) =&gt; {
      <span style="color:#0086b3">console</span>.exception(err)
    })
    .on(<span style="color:#219161">&#x27;data&#x27;</span>, (benchmark) =&gt; {
      bidi.send(
        {
          <span class="hljs-attr">requests</span>: benchmark.requests, 
          <span class="hljs-attr">responses</span>: benchmark.responses + <span style="color:#40a070">1</span>
        }
      );
      <span style="color:#954121">if</span> (benchmark.requests % <span style="color:#40a070">10000</span> === <span style="color:#40a070">0</span>) {
        end = <span style="color:#0086b3">Number</span>(process.hrtime.bigint());
      <span style="color:#0086b3">console</span>.log(
        <span style="color:#219161">&#x27;client address:&#x27;</span>, bidi.getPeer(),
        <span style="color:#219161">&#x27;\nnumber of requests:&#x27;</span>, benchmark.requests,
        <span style="color:#219161">&#x27;\navg millisecond speed per request:&#x27;</span>, ((end - start) /<span style="color:#40a070">1000000</span>) / benchmark.requests
      );
    }
  })
}

<span style="color:#0086b3">module</span>.exports = { 
	BidiMathHandler,
}</code></pre><blockquote><p>As I&#x27;m sure you&#x27;ve noticed, the Objects we are receiving and sending have exactly the properties and value-types we defined in the Benchmark message in the .proto file. If you attempt to send an incorrectly formatted Object, the RPC Method will coerce the Object into a Message with the correct formatting. Values will be coerced to a default falsey value: <code>{ aString: &#x27;&#x27; }</code>, <code>{ someObject: {}, anArray: [] }</code>, or in our BidiMath example <code>{ requests: 0, responses: 0 }</code>.</p></blockquote><h2>5. Add the Services</h2><p>Let&#x27;s import the Handler and the package and add each Service to our Server alongside an Object mapping the name of the RPC Method with the Handler we created.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /server/server.js</span>
<span style="color:#954121">const</span> { Server } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> package = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;../package.js&#x27;</span> );
<span style="color:#954121">const</span> { BidiMathHandler } = <span style="color:#0086b3">require</span> ( <span style="color:#219161">&#x27;./chattyMathHandlers.js );

new Server()
  .addService( package.ChattyMath,   {
  BidiMath: BidiMathHandler,
})</span></code></pre><blockquote><p>Servers can chain the .addService method as many times as they wish for each Service that we defined in the .proto file. If you have multiple RPC methods in a Service, each should be mapped as a property on the Object with a Handler function as the value. Not mapping all of your RPC Methods will cause a Server error.</p></blockquote><h2>6. Bind the server to addresses</h2><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /server/server.js</span>
<span style="color:#954121">const</span> { Server } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> package = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;../package.js&#x27;</span> );
<span style="color:#954121">const</span> { BidiMathHandler } = <span style="color:#0086b3">require</span> ( <span style="color:#219161">&#x27;./chattyMathHandlers.js&#x27;</span> );

<span style="color:#954121">new</span> Server()
  .addService( package.ChattyMath,   {
  <span class="hljs-attr">BidiMath</span>: BidiMathHandler,
})
  .bind(<span style="color:#219161">&#x27;0.0.0.0: 3000&#x27;</span>)</code></pre><blockquote><p>The .bind method can be passed an array of strings to accept requests at any number of addresses. For example:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code>server.bind( [ 
  <span style="color:#219161">&#x27;0.0.0.0: 3000&#x27;</span>, 
  <span style="color:#219161">&#x27;0.0.0.0: 8080&#x27;</span>, 
  <span style="color:#219161">&#x27;0.0.0.0: 9900&#x27;</span>,
] );</code></pre><h2>7. Start the server</h2><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /server/server.js</span>
<span style="color:#954121">const</span> { Server } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> package = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;../package.js&#x27;</span> );
<span style="color:#954121">const</span> { BidiMathHandler } = <span style="color:#0086b3">require</span> ( <span style="color:#219161">&#x27;./heavyMathHandlers.js&#x27;</span> );</code></pre></blockquote><p>new Server()
  .addService( 
    package.ChattyMath,<br/>    { BidiMath: BidiMathHandler }
  )
  .bind(&#x27;0.0.0.0: 3000&#x27;)
  .start();</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code>&gt; Run your <span style="color:#954121">new</span> firecomm/gRPC-Node server <span style="color:#954121">with</span>: `node /server/server.js`. It may also be worthwhile <span style="color:#954121">to</span> map this command <span style="color:#954121">to</span> `npm start` <span style="color:#954121">in</span> your `package.json`.

## <span style="color:#40a070">8</span>.  <span style="color:#954121">Create</span> a client Stub <span style="color:#954121">for</span> <span style="color:#954121">each</span> Service:
Now that the server <span style="color:#954121">is</span> up <span style="color:#954121">and</span> running, we have <span style="color:#954121">to</span> pass superpowers <span style="color:#954121">to</span> the client-side. We open channels <span style="color:#954121">by</span> connecting <span style="color:#954121">each</span> Stub <span style="color:#954121">to</span> the same address <span style="color:#954121">as</span> a Server <span style="color:#954121">is</span> bound <span style="color:#954121">to</span>. <span style="color:#954121">In</span> <span style="color:#954121">order</span> <span style="color:#954121">for</span> the Stub <span style="color:#954121">to</span> be able <span style="color:#954121">to</span> make RPC <span class="hljs-function"><span style="color:#954121">Method</span> <span style="color:#458;font-weight:bold">requests</span> <span style="color:#458;font-weight:bold">we</span> <span style="color:#458;font-weight:bold">need</span> <span style="color:#458;font-weight:bold">to</span> <span style="color:#458;font-weight:bold">pass</span> <span style="color:#458;font-weight:bold">the</span> <span style="color:#458;font-weight:bold">package</span>.<span style="color:#458;font-weight:bold">Service</span> <span style="color:#458;font-weight:bold">into</span> <span style="color:#458;font-weight:bold">a</span> <span style="color:#458;font-weight:bold">newly</span> <span style="color:#458;font-weight:bold">constructed</span> `<span style="color:#458;font-weight:bold">Stub</span>`.
```<span style="color:#458;font-weight:bold">javascript</span>
// /<span style="color:#458;font-weight:bold">clients</span>/<span style="color:#458;font-weight:bold">chattyMath</span>.<span style="color:#458;font-weight:bold">js</span>
<span style="color:#458;font-weight:bold">const</span> <span style="color:#408080;font-style:italic">{ Stub }</span> = <span style="color:#458;font-weight:bold">require</span><span style="color:#00f">( <span style="color:#219161">&#x27;firecomm&#x27;</span> )</span>;</span>
<span style="color:#954121">const</span> package = <span style="color:#954121">require</span>( <span style="color:#219161">&#x27;../package.js&#x27;</span> )
<span style="color:#954121">const</span> stub = <span style="color:#954121">new</span> Stub( 
	package.ChattyMath, 
	<span style="color:#219161">&#x27;localhost: 3000&#x27;</span>, <span style="color:#408080;font-style:italic">// also can be &#x27;0.0.0.0: 3000&#x27;</span>
);</code></pre><blockquote><p>Under the hood, Firecomm extends Google&#x27;s gRPC core channel configurations. You can pass an Object to the Stub as the second argument to configure advanced options. <strong>Note: Any channel configurations on the client Stub should match the configurations on the server it is requesting to.</strong> You can see all of the Object properties and the values you can set them to in the gRPC core docs <a href="https://grpc.github.io/grpc/core/group__grpc__arg__keys.html">here</a>.</p></blockquote><h2>9. Make requests from the Stub and see how many requests and responses a duplex can make!</h2><p>Before we can interact with a server, our client Stub needs to invoke the RPC Method. We can also pass any metadata we would like to send at this point as the first argument of the RPC Method. RPC Methods now exist on the Stub just like it was defined in the .proto file because we passed the package.Service into the Stub constructor. Because we defined the RPC Method to send a stream of messages and return a stream of messages, both the client Stub and the server can send and listen for any number of messages over a long-living TCP connection. </p><p>Once the RPC Method is invoked, the client Stub always sends the first request. As soon as the server Handler receives the request, the ping-pong will begin. Similarly to the server Handler, now on the client-side, we will begin listening for server requests and immediately sending back client responses. Again, metadata is received from the server only once at the start of the exchange, which will trigger Node&#x27;s built in timers to start clocking the nanoseconds between requests and responses.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /clients/chattyMath.js</span>
<span style="color:#954121">const</span> { Stub } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> package = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;../package.js&#x27;</span> )
<span style="color:#954121">const</span> stub = <span style="color:#954121">new</span> Stub( 
  package.ChattyMath, 
  <span style="color:#219161">&#x27;localhost: 3000&#x27;</span>,
);

<span style="color:#954121">let</span> start;
<span style="color:#954121">let</span> end;
<span style="color:#954121">const</span> bidi = stub.bidiMath({<span class="hljs-attr">thisIsMetadata</span>: <span style="color:#219161">&#x27;let the races begin&#x27;</span>})
  .send({<span class="hljs-attr">requests</span>: <span style="color:#40a070">1</span>, <span class="hljs-attr">responses</span>: <span style="color:#40a070">0</span>})
  .on( <span style="color:#219161">&#x27;metadata&#x27;</span>, (metadata) =&gt; {
    start = <span style="color:#0086b3">Number</span>(process.hrtime.bigint());
    <span style="color:#0086b3">console</span>.log(metadata.getMap())
  })
  .on( <span style="color:#219161">&#x27;error&#x27;</span>, (err) =&gt; <span style="color:#0086b3">console</span>.error(err))
  .on( <span style="color:#219161">&#x27;data&#x27;</span>, (benchmark) =&gt; {
    bidi.send(
      {
        <span class="hljs-attr">requests</span>: benchmark.requests + <span style="color:#40a070">1</span>, 
        <span class="hljs-attr">responses</span>: benchmark.responses
      }
    )
    <span style="color:#954121">if</span> (benchmark.responses % <span style="color:#40a070">10000</span> === <span style="color:#40a070">0</span>) {
      end = <span style="color:#0086b3">Number</span>(process.hrtime.bigint());
    <span style="color:#0086b3">console</span>.log(
      <span style="color:#219161">&#x27;server address:&#x27;</span>, bidi.getPeer(),
      <span style="color:#219161">&#x27;\ntotal number of responses:&#x27;</span>, benchmark.responses,
      <span style="color:#219161">&#x27;\navg millisecond speed per response:&#x27;</span>, ((end - start) /<span style="color:#40a070">1000000</span>) / benchmark.responses
    )
  }
});</code></pre><blockquote><p>Run your new firecomm/gRPC-Node client with: <code>node /clients/chattyMath.js</code>. It may also be worthwhile to map this command to a script like <code>npm run client</code> in your <code>package.json</code>.</p></blockquote><p>Now enjoy the power of gRPCs! See how many requests and responses you can make per second with one duplex RPC method! </p><p>Explore the flexible possibilities! Creatively modify the bidiMath to be full duplex instead of ping-ponging. Add more client Stubs to run services in parallel to one server address, bind multiple addresses to the Server, run multiple clients with their own Stubs requesting from separate addresses, etc. And once you feel comfortable with the clients and servers, dive into modifying the .proto file to change the message fields or add multiple messages with different fields to send and receive, add multiple RPC methods to one Service, or add multiple Services to the package. Then, build the new .proto, add each package.Service to a server, create a Stub with the each matching package.Service and a server address, and explore the endless potential of gRPCs!</p><div class="ButtonBar__ButtonBarStyles-sc-2ianj5-0 kVCNU"><a href="/docs/gettingstarted/concepts"><button><i class="fa fa-arrow-left"></i>CONCEPTS</button></a><a href="/docs/core/overview"><button>OVERVIEW<!-- --> <i class="fa fa-arrow-right"></i></button></a></div></div></div><section class="Footer__FooterStyles-sc-1aztnwy-2 kVBzNx"><div class="Footer__FooterSection-sc-1aztnwy-0 QhKwy"><h5><strong>Docs</strong></h5><h5><a href="/docs/gettingstarted/intro">Getting Started</a></h5><h5><a href="/docs/core/overview">Overview</a></h5><h5><a href="/docs/extensions/middleware">Middleware</a></h5></div><div class="Footer__FooterSection-sc-1aztnwy-0 QhKwy"><h5><strong>API Reference</strong></h5><h5><a href="/docs/core/server">Server</a></h5><h5><a href="/docs/core/stub">Stub</a></h5><h5><a href="/docs/core/build">Build</a></h5></div><div class="Footer__FooterSection-sc-1aztnwy-0 QhKwy"><h5><strong>More</strong></h5><h5><a href="https://github.com/firecomm/firecomm">Github</a></h5></div><section class="Footer__Bumper-sc-1aztnwy-1 gvDWNs">Copyright (c) 2019-present Ian Geckeler, Daniel Nagano-Gerace, Giuseppe Valentino, and Dmitriy Levy. Icons credit to Font Awesome and the Noun Project.</section></section></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{}},"page":"/docs/gettingstarted/intro","query":{},"buildId":"D1n98egrL5Qu9LX4VeNKo","dynamicBuildId":false,"nextExport":true}</script><script async="" id="__NEXT_PAGE__/docs/gettingstarted/intro" src="/_next/static/D1n98egrL5Qu9LX4VeNKo/pages/docs/gettingstarted/intro.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/_next/static/D1n98egrL5Qu9LX4VeNKo/pages/_app.js"></script><script src="/_next/static/runtime/webpack-f5e50b6b501ccea2a79b.js" async=""></script><script src="/_next/static/chunks/commons.39e182df59db346140cc.js" async=""></script><script src="/_next/static/runtime/main-15debc5db3b5bb3d1ded.js" async=""></script></body></html>